<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Modix - Accueil</title>
<style>
  /* ====== Reset & base ====== */
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Arial',sans-serif; }
  body { background: #111; color: #fff; overflow-x:hidden; }
  a { text-decoration: none; color: inherit; }

  /* ====== Fond animé ====== */
  body::before {
    content:""; position:fixed; top:0; left:0; width:100%; height:100%;
    background: radial-gradient(circle at center, #0ff 0%, transparent 70%);
    animation: pulseBg 8s infinite alternate;
    z-index:-2;
  }
  .stars {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background: url('https://i.ibb.co/gZM6f0C/stars.png') repeat;
    animation: moveStars 300s linear infinite;
    z-index:-3;
    opacity: 0.6;
  }
  @keyframes moveStars { from{background-position:0 0;} to{background-position:-10000px 5000px;} }
  @keyframes pulseBg { 0%{opacity:0.3;}100%{opacity:0.7;} }

  /* ====== Header ====== */
  header {
    width:100%; display:flex; justify-content:space-between; align-items:center;
    padding:15px 50px; background: rgba(0,0,0,0.7); backdrop-filter: blur(12px);
    position:fixed; top:0; left:0; z-index:10; border-bottom: 1px solid #0ff;
  }
  header h1 { font-size:30px; color:#0ff; text-shadow: 0 0 8px #0ff, 0 0 15px #09f; }
  nav a { margin-left:30px; font-size:16px; font-weight:bold; color:#0ff; transition: 0.3s; }
  nav a:hover { color:#0ff; text-shadow: 0 0 8px #0ff, 0 0 15px #09f; }

  /* ====== Container principal ====== */
  .container { max-width:1200px; margin:120px auto 50px; padding:0 20px; }

  /* ====== Stats ====== */
  .stats { display:flex; justify-content:space-around; flex-wrap:wrap; margin-bottom:50px; }
  .stat-card {
    background: rgba(15,15,15,0.8); border-radius:15px;
    padding:25px; width:240px; margin:10px; text-align:center;
    box-shadow: 0 0 20px rgba(0,255,255,0.4);
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .stat-card:hover { transform: translateY(-7px); box-shadow: 0 0 30px rgba(0,255,255,0.6); }
  .stat-card h2 { font-size:48px; color:#0ff; margin-bottom:10px; }
  .stat-card p { font-size:16px; color:#09f; }

  /* ====== Musique ====== */
  .music { margin-bottom:50px; }
  .music h2 { color:#0ff; margin-bottom:20px; text-shadow:0 0 8px #0ff; }
  .track {
    display:flex; justify-content:space-between; margin-bottom:12px;
    background: rgba(20,20,20,0.7); padding:12px 20px; border-radius:10px;
    border-left:5px solid #0ff; transition:0.3s;
  }
  .track:hover { background: rgba(0,255,255,0.1); }

  /* ====== Avis ====== */
  .reviews { margin-bottom:50px; }
  .reviews h2 { color:#0ff; margin-bottom:20px; text-shadow:0 0 8px #0ff; }
  .review {
    background: rgba(20,20,20,0.7); padding:15px; border-radius:12px;
    margin-bottom:12px; display:flex; justify-content:space-between; box-shadow: 0 0 10px #0ff;
    transition: 0.3s;
  }
  .review:hover { box-shadow: 0 0 20px #09f; }
  .stars-review { color:#0ff; }
  .review-text { max-width:70%; }

  /* ====== Commandes ====== */
  .commands h2 { color:#0ff; margin-bottom:20px; text-shadow:0 0 8px #0ff; }
  .cmd-card {
    background: rgba(15,15,15,0.8); border-left:5px solid #0ff;
    padding:15px; margin-bottom:12px; border-radius:12px; transition:0.3s; cursor:pointer;
  }
  .cmd-card:hover { background: rgba(0,255,255,0.1); transform:translateX(5px); }

  /* ====== Status ====== */
  .status {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(0,255,255,0.1);
    padding: 10px 20px;
    border-radius: 10px;
    border: 1px solid #0ff;
    font-size: 12px;
    color: #0ff;
  }
  .status.error { border-color: #f00; color: #f00; background: rgba(255,0,0,0.1); }
  .status.success { border-color: #0f0; color: #0f0; background: rgba(0,255,0,0.1); }

</style>
</head>
<body>

<div class="stars"></div>

<header>
  <h1>Modix</h1>
  <nav>
    <a href="#stats">Stats</a>
    <a href="#music">Musique</a>
    <a href="#reviews">Avis</a>
    <a href="#commands">Commandes</a>
  </nav>
</header>

<div class="container">

  <!-- ====== Stats ====== -->
  <section id="stats" class="stats">
    <div class="stat-card">
      <h2 id="servers">0</h2>
      <p>Serveurs Discord</p>
    </div>
    <div class="stat-card">
      <h2 id="users">0</h2>
      <p>Membres en ligne</p>
    </div>
  </section>

  <!-- ====== Musique ====== -->
  <section id="music" class="music">
    <h2>Top Musiques Écoutées</h2>
    <div class="track"><span>Track 1</span><span id="track1">0 plays</span></div>
    <div class="track"><span>Track 2</span><span id="track2">0 plays</span></div>
    <div class="track"><span>Track 3</span><span id="track3">0 plays</span></div>
  </section>

  <!-- ====== Avis ====== -->
  <section id="reviews" class="reviews">
    <h2>Avis Utilisateurs</h2>
    <div class="review"><span class="stars-review">★★★★☆</span><span class="review-text">Super bot, vraiment pratique !</span></div>
    <div class="review"><span class="stars-review">★★★★★</span><span class="review-text">Interface stylée et rapide.</span></div>
    <div class="review"><span class="stars-review">★★★☆☆</span><span class="review-text">Fonctionne bien mais peut s'améliorer.</span></div>
  </section>

  <!-- ====== Commandes ====== -->
  <section id="commands" class="commands">
    <h2>Liste des Commandes</h2>
    <div class="cmd-card">/play - Jouer une musique</div>
    <div class="cmd-card">/stop - Stop la musique</div>
    <div class="cmd-card">/ban - Bannir un utilisateur</div>
    <div class="cmd-card">/kick - Expulser un utilisateur</div>
    <div class="cmd-card">/stats - Affiche les stats du bot</div>
    <div class="cmd-card">/help - Affiche toutes les commandes</div>
  </section>

</div>

<!-- Status de connexion -->
<div class="status" id="status">⏳ Connexion...</div>

<script>
// Configuration
const API_URL = "http://fi5.bot-hosting.net:22324/stats";
const UPDATE_INTERVAL = 5000; // 5 secondes

// Fonction pour récupérer les stats
async function fetchStats() {
  const statusEl = document.getElementById("status");
  
  try {
    const res = await fetch(API_URL);
    
    if (!res.ok) {
      throw new Error(`HTTP error! status: ${res.status}`);
    }
    
    const data = await res.json();

    // Mise à jour des stats principales
    document.getElementById("servers").textContent = data.servers || 0;
    document.getElementById("users").textContent = data.users || 0;

    // Mise à jour des top tracks
    if (data.top_tracks) {
      document.getElementById("track1").textContent = (data.top_tracks.track1 || 0) + " plays";
      document.getElementById("track2").textContent = (data.top_tracks.track2 || 0) + " plays";
      document.getElementById("track3").textContent = (data.top_tracks.track3 || 0) + " plays";
    }

    // Status succès
    statusEl.textContent = "✓ Connecté";
    statusEl.className = "status success";
    
  } catch (err) {
    console.error("Erreur lors de la récupération des stats :", err);
    
    // Status erreur
    statusEl.textContent = "✗ Erreur de connexion";
    statusEl.className = "status error";
  }
}

// Lancement initial
fetchStats();

// Mise à jour automatique
setInterval(fetchStats, UPDATE_INTERVAL);

// Animation des nombres (effet compteur)
function animateValue(id, start, end, duration) {
  const obj = document.getElementById(id);
  const range = end - start;
  const increment = end > start ? 1 : -1;
  const stepTime = Math.abs(Math.floor(duration / range));
  let current = start;
  
  const timer = setInterval(() => {
    current += increment;
    obj.textContent = current;
    if (current === end) {
      clearInterval(timer);
    }
  }, stepTime);
}
</script>

</body>
</html>
